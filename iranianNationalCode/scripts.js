const provinces = {
'آذربایجان شرقی': {
'آذرشهر': [169],
'اسکو': [170],
'اهر': [149, 150],
'بستان آباد': [171],
'بناب': [168],
'تبریز': [136, 137, 138],
'ترکمانچای': [545],
'جلفا': [505],
'چاروایماق': [636],
'سراب': [164, 165],
'شبستر': [172],
'صوفیان': [623],
'عجب شیر': [506],
'کلیبر': [519],
'مراغه': [154, 155],
'ورزقان': [567],
'هریس': [173],
'هشترود': [159, 160],
'هوراند': [604]
},
'آذربایجان غربی': {
'ارومیه': [274, 275],
'اشنویه': [295],
'انزل': [637],
'بوکان': [292],
'پلدشت': [492],
'پیرانشهر': [289],
'تخت سلیمان': [677],
'تکاب': [294],
'چایپاره': [493],
'خوی': [279, 280],
'سردشت': [288],
'سلماس': [284, 285],
'سیلوانه': [638],
'سیه چشمه(چالدران)': [291],
'شوط': [640],
'شاهین دژ': [293],
'کشاورز': [675],
'ماکو': [282, 283],
'مهاباد': [286, 287],
'میاندوآب': [296, 297],
'نقده': [290]
},
'همدان': {
'اسدآباد': [400, 401],
'بهار': [404, 405],
'تویسرکان': [397],
'رزن': [398, 399],
'شراء و پیشخوار': [647],
'فامنین': [502],
'قلقل رود': [584],
'کبودرآهنگ': [402, 403],
'ملایر': [392, 393],
'نهاوند': [395, 396],
'همدان': [386, 387]
},
'یزد': {
'ابرکوه': [503],
'اردکان': [444],
'اشکذر': [551],
'بافق': [447],
'بهاباد': [561],
'تفت': [445],
'دستگردان': [718],
'طبس': [83],
'مهریز': [446],
'میبد': [448],
'نیر': [552],
'هرات و مروست': [543],
'یزد': [442, 443]
},
'مرکزی': {
'آشتیان': [51],
'اراک': [52, 53],
'تفرش': [58],
'خمین': [55],
'خنداب': [617],
'دلیجان': [57],
'زرند مرکزی': [618],
'ساوه': [59, 60],
'سربند': [61, 62],
'فراهان': [544],
'محلات': [56],
'وفس': [571],
'هندودر': [593]
},
'هرمزگان': {
'ابوموسی': [667],
'بستک': [348],
'بشاگرد': [586],
'بندرعباس': [338, 339],
'بندرلنگه': [343, 344],
'جاسک': [346],
'حاجی آباد': [337],
'خمیر': [554],
'رودان': [469],
'فین': [537],
'قشم': [345],
'گاوبندی': [470],
'میناب': [341, 342]
},
'لرستان': {
'ازنا': [483, 484],
'اشترینان': [557],
'الشتر': [418],
'الیگودرز': [416, 417],
'بروجرد': [412, 413],
'پاپی': [592],
'چغلوندی': [612],
'چگنی': [613],
'خرم آباد': [406, 407],
'دورود': [421],
'رومشکان': [598],
'کوهدشت': [419],
'ملاوی(پلدختر)': [385],
'نورآباد(دلفان)': [420],
'ویسیان': [528]
},
'مازندران': {
'آمل': [213, 214],
'بابل': [205, 206],
'بابلسر': [498],
'بندپی': [568],
'بندپی شرقی': [711],
'بهشهر': [217, 218],
'تنکابن': [221],
'جویبار': [582],
'چالوس': [483],
'چمستان': [625],
'چهاردانگه': [576],
'دودانگه': [578],
'رامسر': [227],
'ساری': [208, 209],
'سوادکوه': [225],
'شیرگاه': [577],
'عباس آباد': [712],
'قائمشهر': [215, 216],
'کجور': [626],
'کلاردشت': [627],
'گلوگاه': [579],
'میاندورود': [713],
'نکاء': [499],
'نور': [222],
'نوشهر': [219, 220],
'هراز و محمودآباد': [500, 501]
},
'گلستان': {
'آزادشهر': [623],
'آق قلا': [497],
'بندرترکمن': [223],
'بندرگز': [689],
'رامیان': [487],
'علی آباد': [226],
'کردکوی': [224],
'کلاله': [486],
'گرگان': [211, 212],
'گمیشان': [628],
'گنبد کاووس': [202, 203],
'مراوه تپه': [531],
'مینودشت': [488]
},
'گیلان': {
'آستارا': [261],
'آستانه': [273],
'املش': [630],
'بندرانزلی': [264],
'خمام': [518],
'رحیم آباد': [631],
'رشت': [258, 259],
'رضوانشهر': [570],
'رودبار': [265],
'رودسر': [268, 269],
'سنگر': [653],
'سیاهکل': [517],
'شفت': [569],
'صومعه سرا': [267],
'طالش': [262, 263],
'عمارلو': [593],
'فومن': [266],
'کوچصفهان': [693],
'لاهیجان': [271, 272],
'لشت نشاء': [694],
'لنگرود': [270],
'ماسال و شاندرمن': [516]
},
'کرمانشاه': {
'اسلام آباد': [333, 334],
'باینگان': [691],
'پاوه': [322, 323],
'ثلاث باباجانی': [595],
'جوانرود': [395],
'حمیل': [641],
'روانسر': [596],
'سرپل ذهاب': [336],
'سنقر': [335],
'صحنه': [496],
'قصرشیرین': [337],
'کرمانشاه': [324, 325],
'کرند': [394],
'کنگاور': [330],
'گیلانغرب': [332],
'هرسین': [331]
},
'کهکیلویه و بویراحمد': {
'باشت': [687],
'بویراحمد(یاسوج)': [422, 423],
'بهمنی': [599],
'چاروسا': [600],
'دروهان': [688],
'کهکیلویه(دهدشت)': [424, 425],
'گچساران(دوگنبدان)': [426],
'لنده': [550],
'مارگون': [697]
},
'کردستان': {
'بانه': [384],
'بیجار': [377, 378],
'دهگلان': [558],
'دیواندره': [385],
'سروآباد': [646],
'سقز': [375, 376],
'سنندج': [372, 373],
'قروه': [379, 380],
'کامیاران': [383],
'کرانی': [674],
'مریوان': [381, 382],
'نمشیر': [676]
},
'کرمان': {
'ارزونیه': [722],
'انار': [542],
'بافت': [312, 313],
'بردسیر': [317],
'بم': [310, 311],
'جیرفت': [302, 303],
'رابر': [583],
'راور': [321],
'راین': [382],
'رفسنجان': [304, 305],
'رودبار کهنوج': [536],
'ریگان': [605],
'زرند': [308, 309],
'سیرجان': [306, 307],
'شهداد': [319],
'شهربابک': [313, 314],
'عنبرآباد': [606],
'فهرج': [320],
'قلعه گنج': [698],
'کرمان': [298, 299],
'کوهبنان': [535],
'کهنوج': [315, 316],
'گلباف': [318],
'ماهان': [607],
'منوجان': [608]
},
'قزوین': {
'آبیک': [508],
'آوج': [538],
'البرز': [728],
'بوئین زهرا': [509],
'تاکستان': [438, 439],
'رودبار الموت': [580],
'رودبار شهرستان': [590],
'ضیاءآباد': [559],
'طارم سفلی': [588],
'قزوین': [431, 432]
},
'قم': {
'قم': [37, 38],
'کهک': [702]
},
'فارس': {
'آباده': [240, 241],
'آباده طشک': [670],
'ارسنجان': [648],
'استهبان': [252],
'اشکنان': [678],
'اقلید': [253],
'اوز': [649],
'بوانات': [513],
'بیضا': [546],
'جویم': [671],
'جهرم': [246, 247],
'حاجی آباد(زرین دشت)': [654],
'خرامه': [548],
'خشت و کمارج': [547],
'خفر': [655],
'داراب': [248, 249],
'سپیدان': [253],
'سروستان': [514],
'سعادت آباد': [665],
'شیبکوه': [673],
'شیراز': [228, 229, 230],
'فراشبند': [679],
'فسا': [256, 257],
'فیروزآباد': [244, 245],
'قنقری(خرم بید)': [681],
'قیروکارزین': [723],
'کازرون': [236, 237],
'کوار': [683],
'کراش': [656],
'لارستان': [250, 251],
'لامرد': [515],
'مرودشت': [242, 243],
'ممسنی': [238, 239],
'مهر': [657],
'نی ریز': [255]
},
'سمنان': {
'ایوانکی': [684],
'بسطام': [700],
'بیارجمند': [642],
'دامغان': [457],
'سمنان': [456],
'شاهرود': [458, 459],
'گرمسار': [460],
'مهدیشهر': [530],
'میامی': [520]
},
'سیستان و بلوچستان': {
'ایرانشهر': [358, 359],
'بزمان': [682],
'بمپور': [703],
'چابهار': [364, 365],
'خاش': [371],
'دشتیاری': [701],
'راسک': [720],
'زابل': [366, 367],
'زابلی': [704],
'زاهدان': [361, 362],
'سراوان': [369, 370],
'سرباز': [635],
'سیب و سوران': [668],
'شهرکی و ناروئی(زهک)': [533],
'شیب آب': [705],
'فنوج': [699],
'قصرقند': [669],
'کنارک': [725],
'لاشار(اسپکه)': [597],
'میرجاوه': [611],
'نیک شهر': [525]
},
'خوزستان': {
'آبادان': [181],
'آغاجاری': [527],
'اروندکنار': [585],
'امیدیه': [685],
'اندیکا': [663],
'اندیمشک': [192, 193],
'اهواز': [174, 175],
'ایذه': [183, 184],
'باغ ملک': [481],
'بندر امام خمینی': [706],
'بندرماهشهر': [194, 195],
'بهبهان': [185, 186],
'خرمشهر': [182],
'دزفول': [199, 200],
'دشت آزادگان': [198],
'رامشیر': [662],
'رامهرمز': [190, 191],
'سردشت': [692],
'شادگان': [189],
'شاوور': [707],
'شوش': [526],
'شوشتر': [187, 188],
'گتوند': [729],
'لالی': [730],
'مسجدسلیمان': [196, 197],
'هندیجان': [661],
'هویزه': [680]
},
'خراسان رضوی': {
'احمدآباد': [643],
'بجستان': [562],
'بردسکن': [572],
'تایباد': [74],
'تخت جلگه': [644],
'تربت جام': [72, 73],
'تربت حیدریه': [69, 70],
'جغتای': [521],
'جوین': [573],
'چناران': [522],
'خلیل آباد': [724],
'خواف': [76],
'درگز': [77],
'رشتخوار': [650],
'زبرخان': [574],
'سبزوار': [78, 79],
'سرخس': [81],
'فریمان': [84],
'فیض آباد': [651],
'قوچان': [86, 87],
'کاشمر': [89, 90],
'کلات': [553],
'گناباد': [91],
'مشهد': [92, 93, 94],
'مشهد منطقه۲': [97],
'مشهد منطقه۳': [98],
'مشهد منطقه۱': [96],
'نیشابور': [105, 106]
},
'خراسان شمالی': {
'اسفراین': [63],
'بجنورد': [67, 68],
'جاجرم': [75],
'رازوجرکلان': [591],
'شیروان': [82],
'فاروج': [635],
'مانه و سملقان': [524]
},
'چهارمحال و بختیاری': {
'اردل': [468],
'بروجن': [465],
'شهرکرد': [461, 462],
'فارسان': [467],
'فلارد': [632],
'کوهرنگ': [555],
'کیار': [633],
'گندمان': [629],
'لردگان': [466],
'میانکوه': [696]
},
'خراسان جنوبی': {
'بشرویه': [721],
'بیرجند': [64, 65],
'درمیان': [523],
'زیرکوه': [652],
'سرایان': [719],
'سربیشه': [716],
'فردوس': [85],
'قائنات': [88],
'نهبندان': [563]
},
'بوشهر': {
'بندر دیلم': [529],
'بندر گناوه': [353],
'بوشهر': [349, 350],
'تنگستان': [355],
'جم': [609],
'دشتستان': [351, 352],
'دشتی': [354],
'دلوار': [732],
'دیر': [357],
'سعد آباد': [532],
'شبانکاره': [610],
'کنگان': [356]
},
'تهران': {
'اسلامشهر': [556],
'پاکدشت': [658],
'تهران مرکزی': [1, 2, 3, 4, 5, 6, 7, 8],
'تهران جنوب': [11],
'تهران شرق': [20],
'تهرانشمال': [25],
'تهران غرب': [15],
'دماوند': [43],
'رباط کریم': [666],
'ساوجبلاغ': [489],
'شمیران': [44, 45],
'شهرری': [48, 49],
'شهریار': [490, 491],
'طالقان': [695],
'فیروزکوه': [659],
'کرج': [31, 32],
'کهریزک': [664],
'نظرآباد': [717],
'ورامین': [41, 42]
},
'ایلام': {
'آبدانان': [454],
'ارکوازی(ملکشاهی)': [581],
'ایلام': [449, 450],
'ایوان': [616],
'بدره': [534],
'دره شهر': [455],
'دهلران': [451],
'زرین آباد': [726],
'شیروان لومار': [634],
'شیروان و چرداول': [453],
'موسیان': [727],
'مهران': [452]
},
'اردبیل': {
'اردبیل': [145, 146],
'ارشق': [731],
'انگوت': [690],
'بیله سوار': [601],
'پارس آباد': [504],
'خلخال': [163],
'خورش رستم': [714],
'سرعین': [715],
'سنجبد(کوثر)': [566],
'مشکین شهر': [166, 167],
'مغان': [161, 162],
'نمین': [686],
'نیر': [603]
},
'اصفهان': {
'آران و بیدگل': [619],
'اردستان': [118],
'اصفهان': [127, 128, 129],
'باغ بهادران': [620],
'بوئین و میاندشت': [621],
'تیران و کرون': [549],
'جرقویه': [564],
'چادگان': [575],
'خمینی شهر': [113, 114],
'خوانسار': [122],
'خور و بیابانک': [540],
'دولت آباد': [660],
'سمیرم': [120],
'سمیرم سفلی (دهاقان)': [512],
'شاهین شهر': [510, 511],
'شهرضا': [119],
'فریدن': [115],
'فریدونشهر': [112],
'فلاورجان': [110, 111],
'کاشان': [125, 126],
'کوهپایه': [565],
'گلپایگان': [121],
'لنجان(زرینشهر)': [116, 117],
'مبارکه': [541],
'میمه': [622],
'نائین': [124],
'نجف آباد': [108, 109],
'نطنز': [123]
}
};
const names = [
  "پارسا", "سینا", "کیان", "آرمین", "پیمان", "نیما", "آریا", "سامان", 
  "بردیا", "شایان", "رایان", "آرتین", "دانیال", "ایلیا", "سپهر", "رهام", 
  "مانی", "پرهام", "رادین", "هیراد", "پویا", "شروین", "فربد", "سهیل", 
  "یاشار", "آراد", "برسام", "دارا", "زانیار", "سامیار", "ماهان", "ماکان", 
  "پوریا", "کارن", "نامی", "کامیار", "مهراد", "نوید", "فرهام", "فراز", 
  "کوشا", "مازیار", "آرمان", "بهراد", "رامین", "بهزاد", "سام", "مهران", 
  "کوروش", "کیارش", "کاوه", "آرش", "شایگان", "ارسلان", "بهنام", "شادمهر", 
  "آرین", "پدرام", "رامبد", "نریمان", "آرتا", "هومن", "رامیار", "کیانوش", 
  "مهرشاد", "فرشاد", "اشکان", "فرزاد", "طاها", "امیررضا", "محمدامین", 
  "علی‌رضا", "محمدطاها", "امیرعلی", "سعید", "علیرضا", "بهرام", "رضا", 
  "امید", "سروش", "یوسف", "مهدی", "حمیدرضا"
];

const lastNames = [
  "کریمی", "محمدی", "جعفری", "رضایی", "احمدی", "حسینی", "موسوی", "شریفی",
  "قاسمی", "مرادی", "اکبری", "مهدوی", "نعمتی", "خسروی", "عباسی", "هاشمی",
  "اسدی", "رستمی", "معتمدی", "سجادی", "میرزایی", "سلطانی", "خدابنده", "نوروزی",
  "هادیان", "فرهادی", "رنجبر", "شیرازی", "دهقانی", "فتاحی", "صابری", "کاظمی",
  "طاهری", "زارعی", "افشاری", "بیات", "نجفی", "دانشگر", "نیک‌پی", "کیانی",
  "نامداری", "صبوری", "رحمانی", "باقری", "میرزاخانی", "حیدری", "کوهستانی", "صادقی",
  "شایان‌فر", "پارسایی", "آقازاده", "دهقان‌نیا", "قربانی", "ایزدی", "یوسفی", "حسنی",
  "فرجی", "نوذری", "علوی", "فرزانه", "ترکاشوند", "رادفر", "بابایی", "مجیدی",
  "خانی", "سامانی", "امیری", "نیکزاد", "طاهریان", "اکبریان", "برومند", "یگانه",
  "کشاورز", "نصیری", "توکلی", "کاظمی‌نیا", "راستگو", "عاشوری", "پناهی", "شفیعی",
  "نوری", "کریمان", "زارع‌پور", "فیروزی", "نیک‌نژاد", "بهرامی", "علی‌نژاد", "احسانی",
  "مختاری", "قنبری", "مشتاق", "آرامی", "نوربخش", "صالحی", "جلالی", "آذری", 
  "گودرزی", "فرشاد", "پرندین", "رضوانی", "رئوفی", "کوثری", "صانعی", "نیکخواه"
];

    function populateCities() {
    const province = document.getElementById('province').value;
    const citySelect = document.getElementById('city');
    citySelect.innerHTML = '';
    if (provinces[province]) {
        Object.keys(provinces[province]).forEach(city => {
            const opt = document.createElement('option');
            opt.value = city;
            opt.textContent = city;
            citySelect.appendChild(opt);
        });
    } else {
        const opt = document.createElement('option');
        opt.textContent = '-- ابتدا استان را انتخاب کنید --';
        citySelect.appendChild(opt);
    }
}

function calculateControlDigit(code) {
    let sum = 0;
    for (let i = 0; i < 9; i++) {
        sum += parseInt(code[i]) * (10 - i);
    }
    let remainder = sum % 11;
    return remainder < 2 ? remainder : 11 - remainder;
}

function generateNationalCardSerial() {
    const firstDigit = Math.floor(Math.random() * 10); // عدد تصادفی 0 تا 9
    const randomLetter = "G"; // حرف تصادفی از A تا Z
    const randomDigits = Math.floor(10000000 + Math.random() * 90000000); // 8 رقم تصادفی
    return `${firstDigit}${randomLetter}${randomDigits}`;
}

function generateNationalCode() {
    const province = document.getElementById('province').value;
    const city = document.getElementById('city').value;
    const yearInput = document.getElementById('birthYear');
    const year = parseInt(yearInput.value);

    if (!province || !city) {
        alert('لطفاً استان و شهر را انتخاب کنید');
        return;
    }

    if (!year || isNaN(year) || year < 1300 || year > 1405) {
        alert("لطفاً سال تولد معتبر وارد کنید (بین 1300 تا 1405)");
        return;
    }

    // تولید اطلاعات رندوم
    const name = names[Math.floor(Math.random() * names.length)];
    const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
    const month = Math.floor(Math.random() * 12) + 1;
    const day = Math.floor(Math.random() * 29) + 1;
    const birthDate = `${year}/${month.toString().padStart(2, '0')}/${day.toString().padStart(2, '0')}`;
    const serial = generateNationalCardSerial();

    // تولید کد ملی
    const codes = provinces[province][city];
    const prefix = codes[Math.floor(Math.random() * codes.length)].toString().padStart(3, '0');
    const middle = Math.floor(Math.random() * 1000000).toString().padStart(6, '0');
    const partial = prefix + middle;
    const controlDigit = calculateControlDigit(partial);
    const nationalCode = partial + controlDigit;

    // نمایش خروجی
    document.getElementById('output').innerHTML =
        `👤 نام: ${name} ${lastName}<br>` +
        `🎂 تاریخ تولد: ${birthDate}<br>` +
        `🆔 کد ملی: ${nationalCode}<br>` +
        `📄 سریال کارت ملی: ${serial}`;
}

function generateRandomNationalCode() {
    const yearInput = document.getElementById('birthYear');
    const year = parseInt(yearInput.value);

    if (!year || isNaN(year) || year < 1300 || year > 1405) {
        alert("لطفاً سال تولد معتبر وارد کنید (بین 1300 تا 1405)");
        return;
    }

    const name = names[Math.floor(Math.random() * names.length)];
    const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
    const month = Math.floor(Math.random() * 12) + 1;
    const day = Math.floor(Math.random() * 29) + 1;
    const birthDate = `${year}/${month.toString().padStart(2, '0')}/${day.toString().padStart(2, '0')}`;
    const serial = generateNationalCardSerial();

    const provinceKeys = Object.keys(provinces);
    const randomProvince = provinceKeys[Math.floor(Math.random() * provinceKeys.length)];
    const cityKeys = Object.keys(provinces[randomProvince]);
    const randomCity = cityKeys[Math.floor(Math.random() * cityKeys.length)];

    document.getElementById('province').value = randomProvince;
    populateCities();

    setTimeout(() => {
        document.getElementById('city').value = randomCity;

        const codes = provinces[randomProvince][randomCity];
        const prefix = codes[Math.floor(Math.random() * codes.length)].toString().padStart(3, '0');
        const middle = Math.floor(Math.random() * 1000000).toString().padStart(6, '0');
        const partial = prefix + middle;
        const controlDigit = calculateControlDigit(partial);
        const nationalCode = partial + controlDigit;

        document.getElementById('output').innerHTML =
            `👤 نام: ${name} ${lastName}<br>` +
            `🎂 تاریخ تولد: ${birthDate}<br>` +
            `🆔 کد ملی: ${nationalCode}<br>` +
            `📄 سریال کارت ملی: ${serial}`;
    }, 50);
}

window.onload = function() {
    const provSelect = document.getElementById('province');
    Object.keys(provinces).forEach(prov => {
        const opt = document.createElement('option');
        opt.value = prov;
        opt.textContent = prov;
        provSelect.appendChild(opt);
    });
}
